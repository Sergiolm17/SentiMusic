(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],{151:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),o=n.n(c),i=(n(82),n(8)),l=(n(76),n(83),n(84),function(e){var t=e.children,n=e.normal;return r.a.createElement("div",{className:"card ".concat(n&&"normal")},t)}),s=(n(85),function(e){var t=e.children,n=e.href;return r.a.createElement("a",{href:n,className:"button-domo"},t)}),u=(n(86),function(e){var t=e.children;return r.a.createElement("h1",null,t)}),m={boxShadow:" 7px 7px 9px rgba(0, 0, 0, 0.2)",height:300},f=function(e){var t=e.nowPlaying;return r.a.createElement("img",{alt:t.name,src:t.albumArt,style:m})},d=n(67),p=n.n(d),v=n(68),g=n.n(v),b=(n(87),function(e){var t=e.state,n=e.onClick;return r.a.createElement("button",{className:"buttonStyle",onClick:n},r.a.createElement("img",{src:t?p.a:g.a,alt:t?"Happy":"Sad",className:"EmojiStyle"}))}),h=(n(88),{margin:"10px"}),E=function(e){var t=e.name,n=e.artist;return r.a.createElement("div",{style:h},r.a.createElement("h2",null,t," "),r.a.createElement("h3",null,n))},O=(n(89),function(e){var t=e.artist,n=e.name,a=e.src,c=e.preview_url,o=e.valence;return r.a.createElement("div",{className:"list-container"},r.a.createElement("div",null,r.a.createElement("img",{alt:n,src:a,style:{height:"50px"}})),r.a.createElement("div",{className:"list-who"},r.a.createElement("span",{className:"list-name"},n),r.a.createElement("span",{className:"list-artist"},t)),r.a.createElement("div",{className:"list-valence"},r.a.createElement("span",{className:"valence"},o)),r.a.createElement("div",{className:"list-audio"},r.a.createElement("audio",{controls:!0,src:c,preload:"none"},"Your browser does not support the",r.a.createElement("code",null,"audio")," element.")))}),j=(n(90),n(69)),y=n.n(j),w=n(70),k=n.n(w),S=n(52),_=n(71);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach(function(t){Object(S.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=new(n.n(_).a),A="https://sentimusic.herokuapp.com",C=A+"/login",I=A+"/refresh_token",T=n(91);function F(e){var t=L(),n=Object(a.useState)(!1),r=Object(i.a)(n,2),c=r[0],o=r[1],l=Object(a.useState)(t.access_token||localStorage.getItem("access_token")),s=Object(i.a)(l,2),u=s[0],m=s[1],f=Object(a.useState)(t.refresh_token||localStorage.getItem("refresh_token")),d=Object(i.a)(f,2),p=d[0];d[1];return Object(a.useEffect)(function(){e?(m(null),localStorage.removeItem("access_token"),p&&fetch(I+T.stringify({refresh_token:p})).then(function(e){return e.json()}).then(function(e){console.log(e),m(e.access_token)})):(localStorage.setItem("access_token",u),localStorage.setItem("refresh_token",p)),u&&N.setAccessToken(u),o(!!u)},[u,e]),c}var W=function(){var e=Object(a.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(!1),m=Object(i.a)(u,2),f=m[0],d=m[1],p=F(f),v=function(){var e=F(),t=Object(a.useState)({}),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){e&&N.getMe().then(function(e){console.log(e),c(e)})},[e]),[r]}(),g=Object(i.a)(v,1)[0];return console.log(g),Object(a.useEffect)(function(){t();var e=setInterval(function(){return p&&t()},1e3);function t(){p&&N.getMyCurrentPlaybackState(function(e,t){e?(d(!0),console.error(e)):(s(!!t&&t.is_playing),d(!1),t&&"episode"!==t.currently_playing_type&&r({name:t.item.name,albumArt:t.item.album.images[0].url,is_playing:t.is_playing,uri:t.item.uri,id:t.item.id,artist:t.item.artists[0].name}))})}return function(){clearInterval(e)}},[p]),[p,n,l,f]},D=function(e,t){var n=Object(a.useState)([]),r=Object(i.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)(function(){e.id&&0!==t&&(console.log(t,"state"),N.getRecommendations({limit:4,market:"PE",seed_tracks:e.id,min_valence:1===t?.5:0,max_valence:1===t?1:.5}).then(function(e){var t=[];e.tracks.map(function(e){N.getAudioFeaturesForTrack(e.id).then(function(n){e=x({},e,{},n),t.push(e)})}),o(t)}))},[e.id,t]),[c]},R=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)([]),l=Object(i.a)(o,2);l[0],l[1];return Object(a.useEffect)(function(){e||N.getMySavedTracks({limit:5,offset:0}).then(function(e){var t=e.items.map(function(e){return e.track.id});N.getRecommendations(Object(S.a)({limit:4,market:"PE",seed_tracks:t.join(",")},"market","PE")).then(function(e){var t=[];e.tracks.map(function(e){N.getAudioFeaturesForTrack(e.id).then(function(n){e=x({},e,{},n),t.push(e)})}),c(t)})})},[]),[r]},M=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){e.id&&N.getAudioFeaturesForTrack(e.id).then(function(e){return c(e)})},[e.id]),[r]},L=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(e=n.exec(a);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(a);return t},U=n(75),H=(n(36),n(150),U.a.Handle,{margin:"20px"});var B=function(){var e=W(),t=Object(i.a)(e,4),n=t[0],c=t[1],o=t[2],m=t[3],d=M(c),p=Object(i.a)(d,1)[0],v=Object(a.useState)(0),g=Object(i.a)(v,2),h=g[0],j=g[1],w=D(c,h),S=Object(i.a)(w,1)[0],_=R(m),P=Object(i.a)(_,1)[0];if(!n||m)return r.a.createElement("div",{className:"App-header"},r.a.createElement(l,null,r.a.createElement("p",null,r.a.createElement("img",{src:y.a,alt:"texto",style:H})),r.a.createElement("p",null,r.a.createElement("img",{src:k.a,alt:"Logo Domo",style:H})),r.a.createElement(s,{href:C,style:H},"Iniciar sesion con spotify")));var x=r.a.createElement("h2",null,0===h?"Playlist automatica":1===h?"Playlist Feliz":"Modo Sad");return r.a.createElement("div",{className:"App-header"},c.name&&n?r.a.createElement(u,null,"Ahora reproduciendo"):r.a.createElement(l,null,r.a.createElement("p",{className:"Title"},"Ponle play para recomendarte")),c.name&&!o&&r.a.createElement(l,{normal:!0},r.a.createElement("p",{className:"Title"},"Ponle play para recomendarte"),r.a.createElement(E,{name:c.name,artist:"".concat(c.artist,"  ").concat(p.valence)})),c.name&&o&&r.a.createElement(l,{normal:!0},r.a.createElement(f,{nowPlaying:c}),r.a.createElement(E,{name:c.name,artist:"".concat(c.artist," ").concat(p.valence)})),c.name&&r.a.createElement(l,null,r.a.createElement("h2",null,"\xbfComo te quieres sentir ?"),r.a.createElement(b,{onClick:function(){return j(1)},state:!0}),r.a.createElement(b,{onClick:function(){return j(2)},state:!1})),0===h&&P.length>0&&r.a.createElement(l,{normal:!0},x,P.map(function(e,t){return r.a.createElement(O,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence})})),h>0&&r.a.createElement(l,{normal:!0},x,S.map(function(e,t){return r.a.createElement(O,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence})})))},J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function q(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(B,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");J?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):q(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):q(t,e)})}}()},67:function(e,t,n){e.exports=n.p+"static/media/Happy.d51ce461.svg"},68:function(e,t,n){e.exports=n.p+"static/media/Sad.28aa5087.svg"},69:function(e,t,n){e.exports=n.p+"static/media/DOMO.554d941c.svg"},70:function(e,t,n){e.exports=n.p+"static/media/Logo.75f61d59.svg"},77:function(e,t,n){e.exports=n(151)},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.7f6ad1c1.chunk.js.map