(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],[,,,,,function(e,t,n){e.exports=n.p+"static/media/Happy.d51ce461.svg"},function(e,t,n){e.exports=n.p+"static/media/Sad.28aa5087.svg"},function(e,t,n){e.exports=n.p+"static/media/DOMO.554d941c.svg"},function(e,t,n){e.exports=n.p+"static/media/Logo.75f61d59.svg"},,function(e,t,n){e.exports=n(25)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(4),i=n.n(r),o=(n(15),n(1)),l=(n(16),n(17),function(e){var t=e.children,n=e.normal;return c.a.createElement("div",{className:"card ".concat(n&&"normal")},t)}),s=(n(18),function(e){var t=e.children,n=e.href,a=e.newtab;return c.a.createElement("a",{href:n,target:a?"_blank":"_self",className:"button-domo"},t)}),u=(n(19),n(5)),m=n.n(u),f=n(6),d=n.n(f),p=(n(20),function(e){var t=e.state,n=e.onClick;return c.a.createElement("button",{className:"buttonStyle",onClick:n},c.a.createElement("img",{src:t?m.a:d.a,alt:t?"Happy":"Sad",className:"EmojiStyle"}))}),b=(n(21),function(e){var t=e.artist,n=e.name,r=e.src,i=e.preview_url,l=e.valence,s=e.onClick,u=Object(a.useState)(!1),m=Object(o.a)(u,2),f=m[0],d=m[1];return i?c.a.createElement("div",{className:"list-container"},c.a.createElement("div",null,c.a.createElement("img",{alt:n,src:r,style:{height:"50px"}})),c.a.createElement("div",{className:"list-who"},c.a.createElement("span",{className:"list-name"},n),c.a.createElement("span",{className:"list-artist"},t)),c.a.createElement("div",{className:"list-valence"},c.a.createElement("span",{className:"valence"},l)),c.a.createElement("div",{className:"list-audio ".concat(f?"active-audio":"disabled-audio")},c.a.createElement("audio",{controls:!0,src:i,preload:"none"},"Your browser does not support the",c.a.createElement("code",null,"audio")," element.")),!f&&c.a.createElement("button",{disabled:f,className:"add-music",onClick:function(){d(!0),s()}},"ADD")):""}),g=n(7),v=n.n(g),O=n(8),h=n.n(O),j=n(9),y=n(2),E=n.n(y),w=(new E.a,function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(e=n.exec(a);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(a);return t}),k="https://sentimusic.herokuapp.com",S=k+"/login";function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(22);var N=new E.a;var x=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)(function(){N.getMe().then(function(e){c(e)})},[]),[n]},C=function(){var e=Object(a.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""}),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(o.a)(r,2),l=i[0],s=i[1],u=Object(a.useState)(!1),m=Object(o.a)(u,2),f=m[0],d=m[1];return Object(a.useEffect)(function(){t();var e=setInterval(function(){return t()},3e3);function t(){N.getMyCurrentPlaybackState(function(t,n){t?(d(!0),clearInterval(e),console.error(t)):(d(!1),s(!!n&&n.is_playing),n.item&&"episode"!==n.currently_playing_type&&c({name:n.item.name,albumArt:n.item.album.images[0].url,is_playing:n.is_playing,uri:n.item.uri,id:n.item.id,artist:n.item.artists[0].name}))})}return function(){clearInterval(e)}},[]),[n,f,l]},I=function(e,t){var n=Object(a.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=A(),s=Object(o.a)(l,1)[0],u="".concat(s.join(",")).concat(e.id?","+e.id:"");return Object(a.useEffect)(function(){console.log(u)},[u]),Object(a.useEffect)(function(){s.length>0&&N.getRecommendations({limit:15,market:"PE",seed_tracks:u,min_valence:0===t?0:1===t?.5:0,max_valence:0===t?1:1===t?1:.5}).then(function(e){var t=[];e.tracks.map(function(e){N.getAudioFeaturesForTrack(e.id).then(function(n){e=P({},e,{},n),t.push(e)})}),i(t)})},[t,s.length]),[r]},A=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)(function(){N.getMySavedTracks({limit:4,offset:0,market:"PE"}).then(function(e){e.items.map(function(e){return P({added_at:e.added_at},e.track)});var t=e.items.map(function(e){return e.track.id});c(t)})},[]),[n]},D=function(){var e=x(),t=Object(o.a)(e,1)[0],n=function(){var e=x(),t=Object(o.a)(e,1)[0],n=Object(a.useState)([]),c=Object(o.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(0),s=Object(o.a)(l,2),u=s[0],m=s[1];return Object(a.useEffect)(function(){t&&N.getUserPlaylists(t.id,{limit:50}).then(function(e){i(e.items)})},[t]),Object(a.useEffect)(function(){if(r.length>0){var e=document.cookie.split(";").map(function(e){var t=e.split("=");return{name:t[0],data:t[1]}}).find(function(e){return" playlist_id"===e.name}),t=r.find(function(e){return"Domo Playlist"===e.name});m(t?1:2),t&&localStorage.setItem("playlist_id",t.id),e&&localStorage.setItem("playlist_id",e.data)}},[t.id]),[u]}(),c=Object(o.a)(n,1)[0],r=Object(a.useState)({}),i=Object(o.a)(r,2),l=i[0],s=i[1];return Object(a.useEffect)(function(){if(!t.id&&2!==c||1===c)return console.log("esperando usuario");localStorage.getItem("playlist_id")?N.getPlaylist(localStorage.getItem("playlist_id")).then(function(e){return s(e)}):N.createPlaylist(t.id,{name:"Domo Playlist",public:!1,collaborative:!0,description:"Playlist de musica Recomendada"}).then(function(e){localStorage.setItem("playlist_id",e.id),s(e)})},[t.id,c]),[l]};var T={margin:"20px"};var W=function(){var e=function(){var e=w(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(e.access_token||localStorage.getItem("access_token")||""),l=Object(o.a)(i,2),s=l[0],u=(l[1],Object(a.useState)(e.refresh_token||localStorage.getItem("refresh_token")||"")),m=Object(o.a)(u,2);return m[0],m[1],Object(a.useEffect)(function(){s&&N.setAccessToken(s),r(!!s)},[s]),c}(),t=C(),n=Object(o.a)(t,2),r=n[0],i=n[1],u=Object(a.useState)(0),m=Object(o.a)(u,2),f=m[0],d=m[1],g=I(r,f),O=Object(o.a)(g,1)[0],j=D(),y=Object(o.a)(j,1)[0],E=c.a.createElement("h2",null,0===f?"Playlist automatica":1===f?"Playlist Feliz":"Modo Sad");return!e||i?c.a.createElement("div",{className:"App-header"},c.a.createElement(l,null,c.a.createElement("p",null,c.a.createElement("img",{src:v.a,alt:"texto",style:T})),c.a.createElement("p",null,c.a.createElement("img",{src:h.a,alt:"Logo Domo",style:T})),c.a.createElement(s,{href:S,style:T,newtab:!0},"Iniciar sesion con spotify"))):c.a.createElement("div",{className:"App-header"},c.a.createElement(l,null,c.a.createElement("h2",null,"\xbfComo te quieres sentir ?"),c.a.createElement(p,{onClick:function(){return d(1)},state:!0}),c.a.createElement(p,{onClick:function(){return d(2)},state:!1})),f>=0&&c.a.createElement(l,{normal:!0},y.external_urls&&O.length>0?c.a.createElement(c.a.Fragment,null,E,c.a.createElement(s,{href:y.external_urls.spotify,style:T,newtab:!0},"Ir a la playlist creada")):c.a.createElement("h2",null,"Cargando ..."),O.map(function(e,t){return c.a.createElement(b,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence,onClick:function(){return function(e,t){console.log(e,t),N.addTracksToPlaylist(e,[t]).then(function(e){console.log(e),N.play(),alert("Se a\xf1adio con exito")})}(y.id,e.uri)}})})))},R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(c.a.createElement(W,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");R?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):M(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):M(t,e)})}}()}],[[10,1,2]]]);
//# sourceMappingURL=main.49a7898f.chunk.js.map