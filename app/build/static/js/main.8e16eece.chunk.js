(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/Happy.d51ce461.svg"},function(e,t,a){e.exports=a.p+"static/media/Sad.28aa5087.svg"},function(e,t,a){e.exports=a.p+"static/media/DOMO.554d941c.svg"},function(e,t,a){e.exports=a.p+"static/media/Logo.75f61d59.svg"},function(e,t,a){e.exports=a(30)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(10),o=a.n(i),r=(a(20),a(1)),l=(a(21),a(22),function(e){var t=e.children,a=e.normal;return c.a.createElement("div",{className:"card ".concat(a&&"normal")},t)}),s=(a(23),function(e){var t=e.children,a=e.href,n=e.newtab;return c.a.createElement("a",{href:a,target:n?"_blank":"_self",className:"button-domo"},t)}),u=a(11),m=a.n(u),d=a(12),f=a.n(d),p=(a(24),function(e){var t=e.state,a=e.onClick;return c.a.createElement("button",{className:"buttonStyle",onClick:a},c.a.createElement("img",{src:t?m.a:f.a,alt:t?"Happy":"Sad",className:"EmojiStyle"}))}),b=(a(25),{margin:"10px"}),g=function(e){var t=e.name,a=e.artist;return c.a.createElement("div",{style:b},c.a.createElement("h2",null,t," "),c.a.createElement("h3",null,a))},v=a(13),E=a.n(v),h=a(14),j=a.n(h),y=(a(26),function(e){var t=e.artist,a=e.name,i=e.src,o=e.preview_url,l=e.valence,s=e.onClick,u=Object(n.useState)(!1),m=Object(r.a)(u,2),d=m[0],f=m[1];return o?c.a.createElement("div",{className:"list-container"},c.a.createElement("div",null,c.a.createElement("img",{alt:a,src:i,style:{height:"50px"}})),c.a.createElement("div",{className:"list-who"},c.a.createElement("span",{className:"list-name"},a),c.a.createElement("span",{className:"list-artist"},t)),c.a.createElement("div",{className:"list-valence"},c.a.createElement("span",{className:"valence"},l)),c.a.createElement("div",{className:"list-audio ".concat(d?"active-audio":"disabled-audio")},c.a.createElement("audio",{controls:!0,src:o,preload:"none"},"Your browser does not support the",c.a.createElement("code",null,"audio")," element.")),!d&&c.a.createElement("button",{disabled:d,className:"add-music",onClick:function(){f(!0),s()}},"ADD")):""}),O=a(2),k=a.n(O),S=(new k.a,function(){var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=a.exec(n);e;)t[e[1]]=decodeURIComponent(e[2]),e=a.exec(n);return t}),_="https://sentimusic.herokuapp.com",w=_+"/login",I=a(4),N=a.n(I),x=(a(27),{apiKey:"AIzaSyALTJda55N9Xs_i-dQ5V5BWyR37cU3CMDA",authDomain:"domo-music.firebaseapp.com",databaseURL:"https://domo-music.firebaseio.com",projectId:"domo-music",storageBucket:"domo-music.appspot.com",messagingSenderId:"550634181029",appId:"1:550634181029:web:5f28c1b8216991d346184c"});N.a.initializeApp(x);var A=N.a,C=A.firestore();var P=new k.a;var D=function(){var e=Object(n.useState)({}),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){P.getMe().then(function(e){c(e)})},[]),[a]},M=function(){var e=Object(n.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""}),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),o=Object(r.a)(i,2),l=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(r.a)(u,2),d=m[0],f=m[1];return Object(n.useEffect)(function(){t();var e=setInterval(function(){return t()},3e3);function t(){P.getMyCurrentPlaybackState(function(t,a){t?(f(!0),clearInterval(e),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),console.error(t)):(f(!1),s(!!a&&a.is_playing),a.item&&"episode"!==a.currently_playing_type&&c({name:a.item.name,albumArt:a.item.album.images[0].url,is_playing:a.is_playing,uri:a.item.uri,id:a.item.id,artist:a.item.artists[0].name}))})}return function(){clearInterval(e)}},[]),[a,d,l]},T=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){P.getMySavedTracks({limit:4,offset:0,market:"PE"}).then(function(e){var t=e.items.map(function(e){return e.track.id});c(t)})},[]),[a]},R=function(){var e=D(),t=Object(r.a)(e,1)[0],a=Object(n.useState)(null),c=Object(r.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)({}),s=Object(r.a)(l,2),u=s[0],m=s[1];return Object(n.useEffect)(function(){i&&localStorage.setItem("playlist_id",i)},[i]),Object(n.useEffect)(function(){t.id&&function(e,t){if(e){var a=C.collection("users").doc(e);a.get().then(function(n){n.exists?t(n.data()):(a.set({user:e}),console.log("No such document!"),t(null,"No such document!"))})}else t(null,"No such user!")}(t.id,function(e,a){if(a)return console.log(a);e&&(e.playlist_id?o(e.playlist_id):P.createPlaylist(t.id,{name:"Domo Playlist",public:!1,collaborative:!0,description:"Playlist de musica Recomendada"}).then(function(e){!function(e,t,a){e?C.collection("users").doc(e).set(t,{merge:!0}).then(function(){a(t)}).catch(function(e){a(null,e)}):a(null,"No such user!")}(t.id,{playlist_id:e.id},function(e,t){return console.log(e,t)}),o(e.id)}))})},[t.id]),Object(n.useEffect)(function(){i&&P.getPlaylist(i).then(function(e){console.log(e),m(e),o(e.id)})},[i]),[u]};var B={margin:"20px"},L=function(e){var t=e.nowPlaying,a=e.state,i=R(),o=Object(r.a)(i,1)[0],u=function(e,t){var a=Object(n.useState)([]),c=Object(r.a)(a,2),i=c[0],o=c[1],l=T(),s=Object(r.a)(l,1)[0],u=Object(n.useState)("".concat(s.join(",")).concat(e.id?","+e.id:"")),m=Object(r.a)(u,2),d=m[0],f=m[1];return Object(n.useEffect)(function(){f("".concat(s.join(",")).concat(e.id?","+e.id:""))},[e,s]),Object(n.useEffect)(function(){d&&P.getRecommendations({limit:15,market:"PE",seed_tracks:d,min_valence:0===t?0:1===t?.5:0,max_valence:0===t?1:1===t?1:.5}).then(function(e){o(e.tracks)})},[t,d]),[i]}(t,a),m=Object(r.a)(u,1)[0],d=c.a.createElement("h2",null,0===a?"Playlist automatica":1===a?"Playlist Feliz":"Modo Sad");return c.a.createElement(l,{normal:!0},c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto 40%",alignItems:"center"}},d,o.external_urls&&c.a.createElement(s,{href:o.external_urls.spotify,style:B},"Ir a la playlist creada")),m.map(function(e,t){return c.a.createElement(y,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence,onClick:function(){return function(e,t){console.log(e,t),P.addTracksToPlaylist(e,[t]).then(function(e){console.log(e),P.play(),alert("Se a\xf1adio con exito")})}(o.id,e.uri)}})}))},z={margin:"20px"};var J=function(){var e=function(){var e=S(),t=Object(n.useState)(!1),a=Object(r.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(localStorage.getItem("access_token")||e.access_token||""),l=Object(r.a)(o,1)[0],s=Object(n.useState)(localStorage.getItem("refresh_token")||e.refresh_token||""),u=Object(r.a)(s,1)[0];return Object(n.useEffect)(function(){},[]),Object(n.useEffect)(function(){l&&(P.setAccessToken(l),localStorage.setItem("access_token",l),localStorage.setItem("refresh_token",u)),i(!!l)},[l,u]),c}(),t=Object(n.useState)(0),a=Object(r.a)(t,2),i=a[0],o=a[1],u=M(),m=Object(r.a)(u,2),d=m[0],f=m[1];return!e||f?c.a.createElement("div",{className:"App-header"},c.a.createElement(l,null,c.a.createElement("p",null,c.a.createElement("img",{src:E.a,alt:"texto",style:z})),c.a.createElement("p",null,c.a.createElement("img",{src:j.a,alt:"Logo Domo",style:z})),c.a.createElement(s,{href:w,style:z},"Iniciar sesion con spotify"))):c.a.createElement("div",{className:"App-header"},d.name&&c.a.createElement(l,{normal:!0},c.a.createElement("h3",{style:{textAlign:"left"}},"Ahora reproduciendo:"),c.a.createElement(g,{name:d.name,artist:"".concat(d.artist," ")})),c.a.createElement(l,null,c.a.createElement("h2",null,"\xbfComo te quieres sentir ?"),c.a.createElement(p,{onClick:function(){return o(1)},state:!0}),c.a.createElement(p,{onClick:function(){return o(2)},state:!1})),c.a.createElement(L,{nowPlaying:d,state:i}))};Boolean("34.68.6.184"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[15,1,2]]]);
//# sourceMappingURL=main.8e16eece.chunk.js.map