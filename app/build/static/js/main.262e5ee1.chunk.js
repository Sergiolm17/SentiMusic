(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],[,,,,,function(e,t,a){e.exports=a.p+"static/media/Happy.d51ce461.svg"},function(e,t,a){e.exports=a.p+"static/media/Sad.28aa5087.svg"},function(e,t,a){e.exports=a.p+"static/media/DOMO.554d941c.svg"},function(e,t,a){e.exports=a.p+"static/media/Logo.75f61d59.svg"},,function(e,t,a){e.exports=a(26)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(4),o=a.n(r),i=(a(15),a(1)),l=(a(16),a(17),function(e){var t=e.children,a=e.normal;return c.a.createElement("div",{className:"card ".concat(a&&"normal")},t)}),s=(a(18),function(e){var t=e.children,a=e.href,n=e.newtab;return c.a.createElement("a",{href:a,target:n?"_blank":"_self",className:"button-domo"},t)}),u=(a(19),a(5)),m=a.n(u),f=a(6),d=a.n(f),p=(a(20),function(e){var t=e.state,a=e.onClick;return c.a.createElement("button",{className:"buttonStyle",onClick:a},c.a.createElement("img",{src:t?m.a:d.a,alt:t?"Happy":"Sad",className:"EmojiStyle"}))}),b=(a(21),a(22),function(e){var t=e.artist,a=e.name,r=e.src,o=e.preview_url,l=e.valence,s=e.onClick,u=Object(n.useState)(!1),m=Object(i.a)(u,2),f=m[0],d=m[1];return c.a.createElement("div",{className:"list-container"},c.a.createElement("div",null,c.a.createElement("img",{alt:a,src:r,style:{height:"50px"}})),c.a.createElement("div",{className:"list-who"},c.a.createElement("span",{className:"list-name"},a),c.a.createElement("span",{className:"list-artist"},t)),c.a.createElement("div",{className:"list-valence"},c.a.createElement("span",{className:"valence"},l)),c.a.createElement("div",{className:"list-audio ".concat(f?"active-audio":"disabled-audio")},c.a.createElement("audio",{controls:!0,src:o,preload:"none"},"Your browser does not support the",c.a.createElement("code",null,"audio")," element.")),!f&&c.a.createElement("button",{disabled:f,className:"add-music",onClick:function(){d(!0),s()}},"ADD"))}),g=a(7),O=a.n(g),v=a(8),j=a.n(v),y=a(2),h=a(9);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var S=new(a.n(h).a),_="https://sentimusic.herokuapp.com",w=_+"/login",P=_+"/refresh_token",I=a(23);function x(e){var t=T(),a=Object(n.useState)(!1),c=Object(i.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)(t.access_token||localStorage.getItem("access_token")),s=Object(i.a)(l,2),u=s[0],m=s[1],f=Object(n.useState)(t.refresh_token||localStorage.getItem("refresh_token")),d=Object(i.a)(f,2),p=d[0];d[1];return Object(n.useEffect)(function(){e?(m(null),localStorage.removeItem("access_token"),console.log(p),p&&fetch(P+I.stringify({refresh_token:p})).then(function(e){return e.json()}).then(function(e){console.log(e),m(e.access_token)})):(localStorage.setItem("access_token",u),localStorage.setItem("refresh_token",p))},[u,e]),Object(n.useEffect)(function(){u&&S.setAccessToken(u),o(!!u)},[u]),r}var N=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""})),c=Object(i.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],m=s[1],f=Object(n.useState)(!1),d=Object(i.a)(f,2),p=d[0],b=d[1],g=x(p);return Object(n.useEffect)(function(){t();var e=setInterval(function(){return g&&t()},3e3);function t(){g&&S.getMyCurrentPlaybackState(function(e,t){e?(b(!0),console.error(e)):(m(!!t&&t.is_playing),b(!1),t&&"episode"!==t.currently_playing_type&&o({name:t.item.name,albumArt:t.item.album.images[0].url,is_playing:t.is_playing,uri:t.item.uri,id:t.item.id,artist:t.item.artists[0].name}))})}return function(){clearInterval(e)}},[g]),[g,r,u,p]},C=function(e,t){var a=Object(n.useState)([]),c=Object(i.a)(a,2),r=c[0],o=c[1],l=D([]),s=Object(i.a)(l,1)[0];return Object(n.useEffect)(function(){var a="".concat(e.id?e.id+",":"").concat(s.join(","));s.length>0&&0!==t&&S.getRecommendations({limit:4,market:"PE",seed_tracks:a,min_valence:1===t?.5:0,max_valence:1===t?1:.5}).then(function(e){var t=[];e.tracks.map(function(e){S.getAudioFeaturesForTrack(e.id).then(function(a){e=k({},e,{},a),t.push(e)})}),o(t)})},[t]),[r]},D=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){S.getMySavedTracks({limit:4,offset:0,market:"PE"}).then(function(e){e.items.map(function(e){return k({added_at:e.added_at},e.track)});var t=e.items.map(function(e){return e.track.id});c(t)})},[]),[a]},A=function(){var e=function(e){var t=x(),a=Object(n.useState)({}),c=Object(i.a)(a,2),r=c[0],o=c[1];return Object(n.useEffect)(function(){t&&S.getMe().then(function(e){o(e)})},[t]),[r]}(),t=Object(i.a)(e,1)[0],a=Object(n.useState)([]),c=Object(i.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)(0),s=Object(i.a)(l,2),u=s[0],m=s[1];return Object(n.useEffect)(function(){t&&S.getUserPlaylists(t.id,{limit:50}).then(function(e){o(e.items)})},[t]),Object(n.useEffect)(function(){if(r.length>0){var e=document.cookie.split(";").map(function(e){var t=e.split("=");return{name:t[0],data:t[1]}}).find(function(e){return" playlist_id"===e.name}),t=r.find(function(e){return"Domo Playlist"===e.name});m(t?1:2),t&&localStorage.setItem("playlist_id",t.id),e&&localStorage.setItem("playlist_id",e.data)}},[r]),[t,u]},M=function(){var e=A(),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({}),o=Object(i.a)(r,2),l=o[0],s=o[1];return Object(n.useEffect)(function(){return a.id||2===c?(1===c&&console.log("se detecto la playlist"),localStorage.getItem("playlist_id")?(S.getPlaylist(localStorage.getItem("playlist_id")).then(function(e){return s(e)}),console.log("existe una playlist en local")):void S.createPlaylist(a.id,{name:"Domo Playlist",public:!1,collaborative:!0,description:"Playlist de musica Recomendada"}).then(function(e){localStorage.setItem("playlist_id",e.id),s(e),console.log(e)})):console.log("esperando usuario")},[a,c]),[l]};var T=function(){var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=a.exec(n);e;)t[e[1]]=decodeURIComponent(e[2]),e=a.exec(n);return t},F={margin:"20px"};var R=function(){var e=N(),t=Object(i.a)(e,4),a=t[0],r=t[1],o=(t[2],t[3]),u=Object(n.useState)(0),m=Object(i.a)(u,2),f=m[0],d=m[1],g=A(),v=(Object(i.a)(g,1)[0],C(r,f)),y=Object(i.a)(v,1)[0],h=M(),E=Object(i.a)(h,1)[0];console.log(E);var k=c.a.createElement("h2",null,0===f?"Playlist automatica":1===f?"Playlist Feliz":"Modo Sad");return!a||o?c.a.createElement("div",{className:"App-header"},c.a.createElement(l,null,c.a.createElement("p",null,c.a.createElement("img",{src:O.a,alt:"texto",style:F})),c.a.createElement("p",null,c.a.createElement("img",{src:j.a,alt:"Logo Domo",style:F})),c.a.createElement(s,{href:w,style:F},"Iniciar sesion con spotify"))):c.a.createElement("div",{className:"App-header"},c.a.createElement(l,null,c.a.createElement("h2",null,"\xbfComo te quieres sentir ?"),c.a.createElement(p,{onClick:function(){return d(1)},state:!0}),c.a.createElement(p,{onClick:function(){return d(2)},state:!1})),f>0&&c.a.createElement(l,{normal:!0},k,c.a.createElement(s,{href:E.external_urls.spotify,style:F,newtab:!0},"Ir a la playlist creada"),y.map(function(e,t){return c.a.createElement(b,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence,onClick:function(){return function(e,t){console.log(e,t),S.addTracksToPlaylist(e,[t]).then(function(e){console.log(e),S.play(),alert("Se a\xf1adio con exito")})}(E.id,e.uri)}})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.262e5ee1.chunk.js.map