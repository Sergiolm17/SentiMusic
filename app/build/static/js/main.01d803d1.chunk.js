(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],{151:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(7),o=a.n(c),i=(a(82),a(8)),l=(a(76),a(83),a(84),function(e){var t=e.children,a=e.normal;return r.a.createElement("div",{className:"card ".concat(a&&"normal")},t)}),s=(a(85),function(e){var t=e.children,a=e.href;return r.a.createElement("a",{href:a,className:"button-domo"},t)}),u=(a(86),function(e){var t=e.children;return r.a.createElement("h1",null,t)}),m={boxShadow:" 7px 7px 9px rgba(0, 0, 0, 0.2)",height:300},f=function(e){var t=e.nowPlaying;return r.a.createElement("img",{alt:t.name,src:t.albumArt,style:m})},p=a(66),d=a.n(p),v=a(67),b=a.n(v),g=(a(87),function(e){var t=e.state,a=e.onClick;return r.a.createElement("button",{className:"buttonStyle",onClick:a},r.a.createElement("img",{src:t?d.a:b.a,alt:t?"Happy":"Sad",className:"EmojiStyle"}))}),E=(a(88),{margin:"10px"}),h=function(e){var t=e.name,a=e.artist;return r.a.createElement("div",{style:E},r.a.createElement("h2",null,t," "),r.a.createElement("h3",null,a))},O=(a(89),function(e){var t=e.artist,a=e.name,n=e.src,c=e.preview_url,o=e.valence;return r.a.createElement("div",{className:"list-container"},r.a.createElement("div",null,r.a.createElement("img",{alt:a,src:n,style:{height:"50px"}})),r.a.createElement("div",{className:"list-who"},r.a.createElement("span",{className:"list-name"},a),r.a.createElement("span",{className:"list-artist"},t)),r.a.createElement("div",{className:"list-valence"},r.a.createElement("span",{className:"valence"},o)),r.a.createElement("div",{className:"list-audio"},r.a.createElement("audio",{controls:!0,src:c,preload:"none"},"Your browser does not support the",r.a.createElement("code",null,"audio")," element.")))}),j=(a(90),a(68)),y=a.n(j),k=a(69),w=a.n(k),S=a(70),_=a(71);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach(function(t){Object(S.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var P=new(a.n(_).a),A="https://sentimusic.herokuapp.com",I=A+"/login",C=A+"/refresh_token",D=a(91);function F(e){var t=B(),a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],o=r[1],l=Object(n.useState)(localStorage.getItem("access_token")||t.access_token),s=Object(i.a)(l,2),u=s[0],m=s[1],f=Object(n.useState)(localStorage.getItem("refresh_token")||t.refresh_token),p=Object(i.a)(f,2),d=p[0];p[1];return Object(n.useEffect)(function(){e?(m(null),localStorage.removeItem("access_token"),d&&fetch(C+D.stringify({refresh_token:d})).then(function(e){return e.json()}).then(function(e){console.log(e),m(e.access_token)})):(localStorage.setItem("access_token",u),localStorage.setItem("refresh_token",d)),u&&P.setAccessToken(u),o(!!u)},[u,e]),c}var T=function(){var e=Object(n.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""}),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(i.a)(u,2),f=m[0],p=m[1],d=F(f);return Object(n.useEffect)(function(){t();var e=setInterval(function(){return d&&t()},1e3);function t(){d&&P.getMyCurrentPlaybackState(function(e,t){e?(p(!0),console.error(e)):(s(!!t&&t.is_playing),p(!1),t&&"episode"!==t.currently_playing_type&&r({name:t.item.name,albumArt:t.item.album.images[0].url,is_playing:t.is_playing,uri:t.item.uri,id:t.item.id,artist:t.item.artists[0].name}))})}return function(){clearInterval(e)}},[d]),[d,a,l,f]},H=function(e,t){var a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)(function(){e.id&&0!==t&&(console.log(t,"state"),P.getRecommendations({limit:4,market:"PE",seed_tracks:e.id,min_valence:1===t?.5:0,max_valence:1===t?1:.5}).then(function(e){var t=[];e.tracks.map(function(e){P.getAudioFeaturesForTrack(e.id).then(function(a){e=N({},e,{},a),t.push(e)})}),o(t)}))},[e.id,t]),[c]},M=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)([]),l=Object(i.a)(o,2);l[0],l[1];return Object(n.useEffect)(function(){e||P.getMySavedTracks({limit:5,offset:0}).then(function(e){var t=e.items.map(function(e){return e.track.id});P.getRecommendations({limit:4,market:"PE",seed_tracks:t.join(",")}).then(function(e){var t=[];e.tracks.map(function(e){P.getAudioFeaturesForTrack(e.id).then(function(a){e=N({},e,{},a),t.push(e)})}),c(t)})})},[]),[r]},R=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)(function(){e.id&&P.getAudioFeaturesForTrack(e.id).then(function(e){return c(e)})},[e.id]),[r]},B=function(){var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=a.exec(n);e;)t[e[1]]=decodeURIComponent(e[2]),e=a.exec(n);return t},J=a(75),L=(a(36),a(150),J.a.Handle,{margin:"20px"});var W=function(){var e=T(),t=Object(i.a)(e,4),a=t[0],c=t[1],o=t[2],m=t[3],p=R(c),d=Object(i.a)(p,1)[0],v=Object(n.useState)(0),b=Object(i.a)(v,2),E=b[0],j=b[1],k=H(c,E),S=Object(i.a)(k,1)[0],_=M(m),x=Object(i.a)(_,1)[0];return!a||m?r.a.createElement("div",{className:"App-header"},r.a.createElement(l,null,r.a.createElement("p",null,r.a.createElement("img",{src:y.a,alt:"texto",style:L})),r.a.createElement("p",null,r.a.createElement("img",{src:w.a,alt:"Logo Domo",style:L})),r.a.createElement(s,{href:I,style:L},"Iniciar sesion con spotify"))):r.a.createElement("div",{className:"App-header"},a&&r.a.createElement(u,null,"Ahora reproduciendo"),c.name&&!o&&r.a.createElement(l,{normal:!0},r.a.createElement("p",{className:"Title"},"Ponle play para recomendarte"),r.a.createElement(h,{name:c.name,artist:"".concat(c.artist,"  ").concat(d.valence)})),c.name&&o&&r.a.createElement(l,{normal:!0},r.a.createElement(f,{nowPlaying:c}),r.a.createElement(h,{name:c.name,artist:"".concat(c.artist," ").concat(d.valence)})),r.a.createElement(l,null,r.a.createElement(g,{onClick:function(){return j(1)},state:!0}),r.a.createElement(g,{onClick:function(){return j(2)},state:!1})),0===E&&r.a.createElement(l,{normal:!0},x.map(function(e,t){return r.a.createElement(O,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence})})),E>0&&r.a.createElement(l,{normal:!0},S.map(function(e,t){return r.a.createElement(O,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},66:function(e,t,a){e.exports=a.p+"static/media/Happy.d51ce461.svg"},67:function(e,t,a){e.exports=a.p+"static/media/Sad.28aa5087.svg"},68:function(e,t,a){e.exports=a.p+"static/media/DOMO.554d941c.svg"},69:function(e,t,a){e.exports=a.p+"static/media/Logo.75f61d59.svg"},77:function(e,t,a){e.exports=a(151)},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.01d803d1.chunk.js.map