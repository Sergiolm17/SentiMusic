(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],[,,,,,function(e,t,a){e.exports=a.p+"static/media/Happy.d51ce461.svg"},function(e,t,a){e.exports=a.p+"static/media/Sad.28aa5087.svg"},function(e,t,a){e.exports=a.p+"static/media/DOMO.554d941c.svg"},function(e,t,a){e.exports=a.p+"static/media/Logo.75f61d59.svg"},,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(4),i=a.n(r),o=(a(15),a(1)),l=(a(16),a(17),function(e){var t=e.children,a=e.normal;return c.a.createElement("div",{className:"card ".concat(a&&"normal")},t)}),s=(a(18),function(e){var t=e.children,a=e.href,n=e.newtab;return c.a.createElement("a",{href:a,target:n?"_blank":"_self",className:"button-domo"},t)}),u=(a(19),a(5)),m=a.n(u),f=a(6),d=a.n(f),p=(a(20),function(e){var t=e.state,a=e.onClick;return c.a.createElement("button",{className:"buttonStyle",onClick:a},c.a.createElement("img",{src:t?m.a:d.a,alt:t?"Happy":"Sad",className:"EmojiStyle"}))}),b=(a(21),function(e){var t=e.artist,a=e.name,r=e.src,i=e.preview_url,l=e.valence,s=e.onClick,u=Object(n.useState)(!1),m=Object(o.a)(u,2),f=m[0],d=m[1];return i?c.a.createElement("div",{className:"list-container"},c.a.createElement("div",null,c.a.createElement("img",{alt:a,src:r,style:{height:"50px"}})),c.a.createElement("div",{className:"list-who"},c.a.createElement("span",{className:"list-name"},a),c.a.createElement("span",{className:"list-artist"},t)),c.a.createElement("div",{className:"list-valence"},c.a.createElement("span",{className:"valence"},l)),c.a.createElement("div",{className:"list-audio ".concat(f?"active-audio":"disabled-audio")},c.a.createElement("audio",{controls:!0,src:i,preload:"none"},"Your browser does not support the",c.a.createElement("code",null,"audio")," element.")),!f&&c.a.createElement("button",{disabled:f,className:"add-music",onClick:function(){d(!0),s()}},"ADD")):""}),g=a(7),O=a.n(g),v=a(8),j=a.n(v),y=a(9),E=a(2),h=a.n(E),k=(new h.a,function(){var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=a.exec(n);e;)t[e[1]]=decodeURIComponent(e[2]),e=a.exec(n);return t}),S="https://sentimusic.herokuapp.com",w=S+"/login";function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}a(22);var x=new h.a;var I=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){x.getMe().then(function(e){c(e)})},[]),[a]},N=function(){var e=Object(n.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""}),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(o.a)(r,2),l=i[0],s=i[1],u=Object(n.useState)(!1),m=Object(o.a)(u,2),f=m[0],d=m[1];return Object(n.useEffect)(function(){t();var e=setInterval(function(){return t()},3e3);function t(){x.getMyCurrentPlaybackState(function(t,a){t?(d(!0),clearInterval(e),console.error(t)):(d(!1),s(!!a&&a.is_playing),a.item&&"episode"!==a.currently_playing_type&&c({name:a.item.name,albumArt:a.item.album.images[0].url,is_playing:a.is_playing,uri:a.item.uri,id:a.item.id,artist:a.item.artists[0].name}))})}return function(){clearInterval(e)}},[]),[a,f,l]},C=function(e,t){var a=Object(n.useState)([]),c=Object(o.a)(a,2),r=c[0],i=c[1],l=D(),s=Object(o.a)(l,1)[0],u="".concat(s.join(",")).concat(e.id?","+e.id:"");return Object(n.useEffect)(function(){console.log(u)},[u]),Object(n.useEffect)(function(){s.length>0&&x.getRecommendations({limit:15,market:"PE",seed_tracks:u,min_valence:0===t?0:1===t?.5:0,max_valence:0===t?1:1===t?1:.5}).then(function(e){var t=[];e.tracks.map(function(e){x.getAudioFeaturesForTrack(e.id).then(function(a){e=P({},e,{},a),t.push(e)})}),i(t)})},[t,s.length]),[r]},D=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){x.getMySavedTracks({limit:4,offset:0,market:"PE"}).then(function(e){e.items.map(function(e){return P({added_at:e.added_at},e.track)});var t=e.items.map(function(e){return e.track.id});c(t)})},[]),[a]},A=function(){var e=I(),t=Object(o.a)(e,1)[0],a=function(){var e=I(),t=Object(o.a)(e,1)[0],a=Object(n.useState)([]),c=Object(o.a)(a,2),r=c[0],i=c[1],l=Object(n.useState)(0),s=Object(o.a)(l,2),u=s[0],m=s[1];return Object(n.useEffect)(function(){t&&x.getUserPlaylists(t.id,{limit:50}).then(function(e){i(e.items)})},[t]),Object(n.useEffect)(function(){if(r.length>0){var e=document.cookie.split(";").map(function(e){var t=e.split("=");return{name:t[0],data:t[1]}}).find(function(e){return" playlist_id"===e.name}),t=r.find(function(e){return"Domo Playlist"===e.name});m(t?1:2),t&&localStorage.setItem("playlist_id",t.id),e&&localStorage.setItem("playlist_id",e.data)}},[t.id]),[u]}(),c=Object(o.a)(a,1)[0],r=Object(n.useState)({}),i=Object(o.a)(r,2),l=i[0],s=i[1];return Object(n.useEffect)(function(){if(!t.id&&2!==c||1===c)return console.log("esperando usuario");localStorage.getItem("playlist_id")?x.getPlaylist(localStorage.getItem("playlist_id")).then(function(e){return s(e)}):x.createPlaylist(t.id,{name:"Domo Playlist",public:!1,collaborative:!0,description:"Playlist de musica Recomendada"}).then(function(e){localStorage.setItem("playlist_id",e.id),s(e)})},[t.id,c]),[l]};var M={margin:"20px"};var T=function(){var e=function(){var e=k(),t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(e.access_token||localStorage.getItem("access_token")||""),l=Object(o.a)(i,2),s=l[0],u=(l[1],Object(n.useState)(e.refresh_token||localStorage.getItem("refresh_token")||"")),m=Object(o.a)(u,2);return m[0],m[1],Object(n.useEffect)(function(){s&&x.setAccessToken(s),r(!!s)},[s]),c}(),t=N(),a=Object(o.a)(t,2),r=a[0],i=a[1],u=Object(n.useState)(0),m=Object(o.a)(u,2),f=m[0],d=m[1],g=C(r,f),v=Object(o.a)(g,1)[0],y=A(),E=Object(o.a)(y,1)[0],h=c.a.createElement("h2",null,0===f?"Playlist automatica":1===f?"Playlist Feliz":"Modo Sad");return!e||i?c.a.createElement("div",{className:"App-header"},c.a.createElement(l,null,c.a.createElement("p",null,c.a.createElement("img",{src:O.a,alt:"texto",style:M})),c.a.createElement("p",null,c.a.createElement("img",{src:j.a,alt:"Logo Domo",style:M})),c.a.createElement(s,{href:w,style:M},"Iniciar sesion con spotify"))):c.a.createElement("div",{className:"App-header"},c.a.createElement(l,null,c.a.createElement("h2",null,"\xbfComo te quieres sentir ?"),c.a.createElement(p,{onClick:function(){return d(1)},state:!0}),c.a.createElement(p,{onClick:function(){return d(2)},state:!1})),f>=0&&c.a.createElement(l,{normal:!0},E.external_urls&&v.length>0?c.a.createElement(c.a.Fragment,null,h,c.a.createElement(s,{href:E.external_urls.spotify,style:M,newtab:!0},"Ir a la playlist creada")):c.a.createElement("h2",null,"Cargando ..."),v.map(function(e,t){return c.a.createElement(b,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images[0].url,preview_url:e.preview_url,valence:e.valence,onClick:function(){return function(e,t){console.log(e,t),x.addTracksToPlaylist(e,[t]).then(function(e){console.log(e),x.play(),alert("Se a\xf1adio con exito")})}(E.id,e.uri)}})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.d782934e.chunk.js.map