(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/Happy.d51ce461.svg"},function(e,t,n){e.exports=n.p+"static/media/Sad.28aa5087.svg"},function(e,t,n){e.exports=n.p+"static/media/Cool.13d79071.svg"},function(e,t,n){e.exports=n.p+"static/media/DOMO.554d941c.svg"},function(e,t,n){e.exports=n.p+"static/media/Logo.75f61d59.svg"},function(e,t,n){e.exports=n.p+"static/media/Spotify.b880b192.svg"},function(e,t,n){e.exports=n.p+"static/media/Add.b99d50c6.svg"},function(e,t,n){e.exports=n(35)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),o=n.n(c),i=(n(24),n(1)),l=(n(25),n(26),function(e){var t=e.children,n=e.normal;return r.a.createElement("div",{className:"".concat(n&&"normal"," card ")},t)}),s=(n(27),function(e){var t=e.children,n=e.href,a=e.newtab,c=e.button,o=e.onClick;return c&&o?r.a.createElement("button",{className:"button-domo",onClick:o},t):r.a.createElement("a",{href:n,target:a?"_blank":"_self",className:"button-domo"},t)}),u=n(12),m=n.n(u),f=n(13),d=n.n(f),p=n(14),b=n.n(p),g=(n(28),function(e){var t=e.state,n=e.onClick;return r.a.createElement("button",{className:"buttonStyle",onClick:n},r.a.createElement("img",{src:function(e){return 1===e?m.a:2===e?d.a:3===e?b.a:null}(t),alt:"emotion",className:"EmojiStyle"}))}),v=(n(29),{boxShadow:" 7px 7px 9px rgba(0, 0, 0, 0.2)",height:250}),y=function(e){var t=e.nowPlaying,n=e.is_playing;return r.a.createElement("img",{alt:t.name,src:t.albumArt,style:v,className:n?"coverActive":"coverDeactivated"})},O=(n(30),{margin:"10px"}),E=function(e){var t=e.name,n=e.artist;return r.a.createElement("div",{style:O},r.a.createElement("h2",null,t," "),r.a.createElement("h3",null,n))},j=n(15),h=n.n(j),_=n(16),k=n.n(_),w=n(17),S=n.n(w),x=n(18),P=n.n(x),N=(n(31),function(e){var t=e.artist,n=e.name,c=e.src,o=e.preview_url,l=(e.valence,e.onClick),s=e.external_urls,u=Object(a.useState)(!1),m=Object(i.a)(u,2),f=m[0],d=m[1];return o?r.a.createElement("div",{className:"list-container"},r.a.createElement("div",null,r.a.createElement("img",{alt:n,src:c,style:{height:"50px"}})),r.a.createElement("div",{className:"list-who"},r.a.createElement("span",{className:"list-name"},n),r.a.createElement("span",{className:"list-artist"},t)),r.a.createElement("div",{className:"gotoSpoty"},r.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:S.a,alt:"Spotify Logo",className:"imageList"}))),r.a.createElement("div",{className:"list-audio ".concat(f?"active-audio":"disabled-audio")},r.a.createElement("audio",{controls:!0,src:o,preload:"none"},"Your browser does not support the",r.a.createElement("code",null,"audio")," element.")),!f&&r.a.createElement("button",{disabled:f,className:"add-music",onClick:function(){d(!0),l()}},r.a.createElement("img",{src:P.a,alt:"Add Logo",className:"imageList"}))):""}),C=n(2),I=n(3),A=n.n(I),D=(new A.a,function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(e=n.exec(a);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(a);return t}),L="https://us-central1-domo-music.cloudfunctions.net/app",M=L+"/login";console.log(M);var T=n(5),B=n.n(T),R=(n(32),{apiKey:"AIzaSyALTJda55N9Xs_i-dQ5V5BWyR37cU3CMDA",authDomain:"domo-music.firebaseapp.com",databaseURL:"https://domo-music.firebaseio.com",projectId:"domo-music",storageBucket:"domo-music.appspot.com",messagingSenderId:"550634181029",appId:"1:550634181029:web:5f28c1b8216991d346184c"});B.a.initializeApp(R);var z=B.a;function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var J=z.firestore();function U(e,t){if(e.id){var n=J.collection("users").doc(e.id);n.get().then(function(a){a.exists?t(a.data()):(n.set(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach(function(t){Object(C.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)),console.log("No such document!"),t(e,"No such document!"))})}else t(null,"Not receive user")}function W(e,t,n){e?(console.log(e),J.collection("users").doc(e.id).set(t,{merge:!0}).then(function(){n(t)}).catch(function(e){n(null,e)})):n(null,"No such user!")}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){Object(C.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H=new A.a;var K=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){H.getMe().then(function(e){r(e)})},[]),[n]},Q=function(){var e=Object(a.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(a.useState)(!1),m=Object(i.a)(u,2),f=m[0],d=m[1];return Object(a.useEffect)(function(){t();var e=setInterval(function(){return t()},3e3);function t(){H.getMyCurrentPlaybackState(function(t,n){t?(d(!0),clearInterval(e),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),console.error(t)):(d(!1),s(!!n&&n.is_playing),n.item&&"episode"!==n.currently_playing_type&&r({name:n.item.name,albumArt:n.item.album.images[0].url,is_playing:n.is_playing,uri:n.item.uri,id:n.item.id,artist:n.item.artists[0].name}))})}return function(){clearInterval(e)}},[]),[n,f,l]},X=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){H.getMySavedTracks({limit:4,offset:0,market:"PE"}).then(function(e){var t=e.items.map(function(e){return e.track.id});r(t)})},[]),[n]};var Y={margin:"20px"},$=function(e){var t=e.nowPlaying,n=e.state,c=function(){var e=K(),t=Object(i.a)(e,1)[0],n=Object(a.useState)(null),r=Object(i.a)(n,2),c=r[0],o=r[1],l=Object(a.useState)({}),s=Object(i.a)(l,2),u=s[0],m=s[1];return Object(a.useEffect)(function(){c&&localStorage.setItem("playlist_id",c)},[c]),Object(a.useEffect)(function(){t&&U(t,function(e,n){e&&(e.playlist_id?H.getPlaylist(e.playlist_id).then(function(e){e.id?(m(e),o(e.id)):W(t,{playlist_id:""},function(e,t){return console.log(e,t)})}):H.createPlaylist(t.id,{name:"Domo Playlist",public:!1,collaborative:!1,description:"Playlist de musica recomendada"}).then(function(e){W(t,{playlist_id:e.id},function(e,t){return console.log(e,t)}),o(e.id),m(e)}))})},[t]),[u]}(),o=Object(i.a)(c,1)[0],u=Object(a.useState)(null),m=Object(i.a)(u,2),f=m[0],d=(m[1],function(e,t,n){var r=Object(a.useState)([]),c=Object(i.a)(r,2),o=c[0],l=c[1],s=X(),u=Object(i.a)(s,1)[0];return Object(a.useEffect)(function(){var a=q({},function(){if(u){if(0===u.length)return{};var t="".concat(u.join(",")).concat(e.id?","+e.id:"");if(t)return{seed_tracks:t}}return{}}(),{},function(e){return 0===e?{min_valence:0,max_valence:1}:1===e?{min_valence:.5,max_valence:1}:2===e?{min_valence:0,max_valence:.5}:3===e?{min_valence:0,max_valence:1}:void 0}(t),{},function(e){return e?{seed_genres:e}:{}}(n));H.getRecommendations(q({limit:15,market:"PE"},a)).then(function(e){l(e.tracks)})},[t,n,u]),[o]}(t,n,f)),p=Object(i.a)(d,1)[0],b=r.a.createElement("h2",null,function(e){return 0===e?"Playlist automatica":1===e?"Playlist Feliz":2===e?"Modo Sad":3===e?"Modo Cool":"Me buggie"}(n));return r.a.createElement(l,{normal:!0},r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto 40%",alignItems:"center"}},b,o.external_urls&&r.a.createElement(s,{href:o.external_urls.spotify,style:Y},"Ir a la playlist creada")),p.map(function(e,t){return r.a.createElement("div",{key:t},e.album.images[0].url&&r.a.createElement(N,{key:e.id,artist:e.artists[0].name,name:e.name,src:e.album.images?e.album.images[0].url:"",preview_url:e.preview_url,valence:e.valence,onClick:function(){return function(e,t){console.log(e,t),H.addTracksToPlaylist(e,[t]).then(function(e){console.log(e),H.play(),alert("Se a\xf1adio con exito")})}(o.id,e.uri)},external_urls:e.external_urls.spotify}))}))},G={margin:"20px"};var Z=function(){var e=function(){var e=D(),t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(localStorage.getItem("access_token")||e.access_token||""),l=Object(i.a)(o,1)[0],s=Object(a.useState)(localStorage.getItem("refresh_token")||e.refresh_token||""),u=Object(i.a)(s,1)[0];return Object(a.useEffect)(function(){},[]),Object(a.useEffect)(function(){l&&(H.setAccessToken(l),localStorage.setItem("access_token",l),localStorage.setItem("refresh_token",u)),c(!!l)},[l,u]),r}(),t=Object(a.useState)(0),n=Object(i.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(null),m=Object(i.a)(u,2),f=m[0],d=m[1],p=Q(),b=Object(i.a)(p,2),v=b[0],O=b[1],j=K(),_=Object(i.a)(j,1)[0];return Object(a.useEffect)(function(){var e,t,n;f&&0!==c?_&&(e=_,t=f,n=c,z.firestore().collection("transition").add({user:e.id,from:t,to:n,date:new Date})):console.log(!f||0===c)},[f,c,_]),!e||O?r.a.createElement("div",{className:"App-header"},r.a.createElement(l,null,r.a.createElement("p",null,r.a.createElement("img",{src:h.a,alt:"texto",style:G})),r.a.createElement("p",null,r.a.createElement("img",{src:k.a,alt:"Logo Domo",style:G})),r.a.createElement(s,{href:M,style:G},"Iniciar sesion con spotify"))):r.a.createElement("div",{className:"App-header"},v.name&&r.a.createElement(l,{normal:!0},r.a.createElement("h3",{style:{textAlign:"left"}},"Ahora reproduciendo:"),r.a.createElement(y,{is_playing:v.is_playing,nowPlaying:v}),r.a.createElement(E,{name:v.name,artist:"".concat(v.artist," ")})),r.a.createElement(l,{normal:!f},0!==c&&r.a.createElement(s,{button:!0,onClick:function(){d(null),o(0)}},"Volver a escoger"),f?0===c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"\xbfComo te quieres sentir ?"),r.a.createElement(g,{onClick:function(){return o(1)},state:1}),r.a.createElement(g,{onClick:function(){return o(3)},state:3}),r.a.createElement(g,{onClick:function(){return o(2)},state:2})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"\xbfComo te sientes ahora?"),r.a.createElement(g,{onClick:function(){return d(1)},state:1}),r.a.createElement(g,{onClick:function(){return d(2)},state:2}))),f&&0!==c&&r.a.createElement($,{nowPlaying:v,state:c}))};Boolean("34.68.6.184"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[19,1,2]]]);
//# sourceMappingURL=main.1cb80361.chunk.js.map