(window.webpackJsonpapp=window.webpackJsonpapp||[]).push([[0],[,,function(e,t,n){"use strict";var a=n(5),c=n(9),r=n.n(c),o=(n(33),{apiKey:"AIzaSyALTJda55N9Xs_i-dQ5V5BWyR37cU3CMDA",authDomain:"domo-music.firebaseapp.com",databaseURL:"https://domo-music.firebaseio.com",projectId:"domo-music",storageBucket:"domo-music.appspot.com",messagingSenderId:"550634181029",appId:"1:550634181029:web:5f28c1b8216991d346184c"});r.a.initializeApp(o);var i=r.a;function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}n.d(t,"b",function(){return u}),n.d(t,"c",function(){return f}),n.d(t,"a",function(){return m});var s=i.firestore();function u(e,t){if(e.id){var n=s.collection("users").doc(e.id);n.get().then(function(c){c.exists?t(c.data()):(n.set(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){Object(a.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)),console.log("No such document!"),t(e,"No such document!"))})}else t(null,"Not receive user")}function f(e,t,n){e?(console.log(e),s.collection("users").doc(e.id).set(t,{merge:!0}).then(function(){n(t)}).catch(function(e){n(null,e)})):n(null,"No such user!")}function m(e,t,n){i.firestore().collection("transition").add({user:e.id,from:t,to:n,date:new Date})}},function(e,t,n){"use strict";var a=n(5),c=n(1),r=n(0),o=n(6),i=n.n(o),l=(new i.a,function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,a=window.location.hash.substring(1);for(e=n.exec(a);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(a);return t}),s="https://us-central1-domo-music.cloudfunctions.net/app",u=s+"/login";console.log(u);var f=n(2);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(a.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,"c",function(){return p}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return v}),n.d(t,"g",function(){return O}),n.d(t,"a",function(){return y}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return u});var b=new i.a;function p(){var e=l(),t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(localStorage.getItem("access_token")||e.access_token||""),s=Object(c.a)(i,1)[0],u=Object(r.useState)(localStorage.getItem("refresh_token")||e.refresh_token||""),f=Object(c.a)(u,1)[0];return Object(r.useEffect)(function(){},[]),Object(r.useEffect)(function(){s&&(b.setAccessToken(s),localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",f)),o(!!s)},[s,f]),a}var g=function(){var e=Object(r.useState)({}),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)(function(){b.getMe().then(function(e){a(e)})},[]),[n]},v=function(){var e=Object(r.useState)({name:"",artist:"",albumArt:"",is_playing:!1,uri:"",id:""}),t=Object(c.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),i=Object(c.a)(o,2),l=i[0],s=i[1],u=Object(r.useState)(!1),f=Object(c.a)(u,2),m=f[0],d=f[1];return Object(r.useEffect)(function(){t();var e=setInterval(function(){return t()},3e3);function t(){b.getMyCurrentPlaybackState(function(t,n){t?(d(!0),clearInterval(e),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),console.error(t)):(d(!1),s(!!n&&n.is_playing),n.item&&"episode"!==n.currently_playing_type&&a({name:n.item.name,albumArt:n.item.album.images[0].url,is_playing:n.is_playing,uri:n.item.uri,id:n.item.id,artist:n.item.artists[0].name}))})}return function(){clearInterval(e)}},[]),[n,m,l]},O=function(e,t,n){var a=Object(r.useState)([]),o=Object(c.a)(a,2),i=o[0],l=o[1],s=j(),u=Object(c.a)(s,1)[0];return Object(r.useEffect)(function(){var a=d({},function(){if(u){if(0===u.length)return{};var t="".concat(u.join(",")).concat(e.id?","+e.id:"");if(t)return{seed_tracks:t}}return{}}(),{},function(e){return 0===e?{min_valence:0,max_valence:1}:1===e?{min_valence:.5,max_valence:1}:2===e?{min_valence:0,max_valence:.5}:3===e?{min_valence:0,max_valence:1}:void 0}(t),{},function(e){return e?{seed_genres:e}:{}}(n));b.getRecommendations(d({limit:15,market:"PE"},a)).then(function(e){l(e.tracks)})},[t,n,u]),[i]},j=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)(function(){b.getMySavedTracks({limit:4,offset:0,market:"PE"}).then(function(e){var t=e.items.map(function(e){return e.track.id});a(t)})},[]),[n]},h=function(){var e=g(),t=Object(c.a)(e,1)[0],n=Object(r.useState)(null),a=Object(c.a)(n,2),o=a[0],i=a[1],l=Object(r.useState)({}),s=Object(c.a)(l,2),u=s[0],m=s[1];return Object(r.useEffect)(function(){o&&localStorage.setItem("playlist_id",o)},[o]),Object(r.useEffect)(function(){t&&Object(f.b)(t,function(e,n){e&&(e.playlist_id?b.getPlaylist(e.playlist_id).then(function(e){e.id?(m(e),i(e.id)):Object(f.c)(t,{playlist_id:""},function(e,t){return console.log(e,t)})}):b.createPlaylist(t.id,{name:"Domo Playlist",public:!1,collaborative:!1,description:"Playlist de musica recomendada"}).then(function(e){Object(f.c)(t,{playlist_id:e.id},function(e,t){return console.log(e,t)}),i(e.id),m(e)}))})},[t]),[u]};function y(e,t){console.log(e,t),b.addTracksToPlaylist(e,[t]).then(function(e){console.log(e),b.play(),alert("Se a\xf1adio con exito")})}},function(e,t,n){"use strict";var a=n(0),c=n.n(a);n(28);t.a=function(e){var t=e.children,n=e.normal;return c.a.createElement("div",{className:"".concat(n&&"normal"," card ")},t)}},,,,function(e,t,n){"use strict";var a=n(0),c=n.n(a);n(29);t.a=function(e){var t=e.children,n=e.href,a=e.newtab,r=e.button,o=e.onClick;return r&&o?c.a.createElement("button",{className:"button-domo",onClick:o},t):c.a.createElement("a",{href:n,target:a?"_blank":"_self",className:"button-domo"},t)}},,,,,,,,function(e,t,n){e.exports=n.p+"static/media/Happy.d51ce461.svg"},function(e,t,n){e.exports=n.p+"static/media/Sad.28aa5087.svg"},function(e,t,n){e.exports=n.p+"static/media/Cool.13d79071.svg"},function(e,t,n){e.exports=n.p+"static/media/DOMO.554d941c.svg"},function(e,t,n){e.exports=n.p+"static/media/Logo.75f61d59.svg"},function(e,t,n){e.exports=n(36)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),o=n.n(r),i=(n(26),n(1)),l=(n(27),n(4)),s=n(8),u=n(16),f=n.n(u),m=n(17),d=n.n(m),b=n(18),p=n.n(b),g=(n(30),function(e){var t=e.state,n=e.onClick;return c.a.createElement("button",{className:"buttonStyle",onClick:n},c.a.createElement("img",{src:function(e){return 1===e?f.a:2===e?d.a:3===e?p.a:null}(t),alt:"emotion",className:"EmojiStyle"}))}),v=(n(31),{boxShadow:" 7px 7px 9px rgba(0, 0, 0, 0.2)",height:250}),O=function(e){var t=e.nowPlaying,n=e.is_playing;return c.a.createElement("img",{alt:t.name,src:t.albumArt,style:v,className:n?"coverActive":"coverDeactivated"})},j=(n(32),{margin:"10px"}),h=function(e){var t=e.name,n=e.artist;return c.a.createElement("div",{style:j},c.a.createElement("h2",null,t," "),c.a.createElement("h3",null,n))},y=n(19),E=n.n(y),w=n(20),k=n.n(w),S=n(3),_=n(2),P={margin:"20px"},x=Object(a.lazy)(function(){return n.e(3).then(n.bind(null,40))});var C=function(){var e=Object(S.c)(),t=Object(a.useState)(0),n=Object(i.a)(t,2),r=n[0],o=n[1],u=Object(a.useState)(null),f=Object(i.a)(u,2),m=f[0],d=f[1],b=Object(S.f)(),p=Object(i.a)(b,2),v=p[0],j=p[1],y=Object(S.e)(),w=Object(i.a)(y,1)[0];return Object(a.useEffect)(function(){m&&0!==r?w&&Object(_.a)(w,m,r):console.log(!m||0===r)},[m,r,w]),!e||j?c.a.createElement("div",{className:"App-header"},c.a.createElement(l.a,null,c.a.createElement("p",null,c.a.createElement("img",{src:E.a,alt:"texto",style:P})),c.a.createElement("p",null,c.a.createElement("img",{src:k.a,alt:"Logo Domo",style:P})),c.a.createElement(s.a,{href:S.b,style:P},"Iniciar sesion con spotify"))):c.a.createElement("div",{className:"App-header"},v.name&&c.a.createElement(l.a,{normal:!0},c.a.createElement("h3",{style:{textAlign:"left"}},"Ahora reproduciendo:"),c.a.createElement(O,{is_playing:v.is_playing,nowPlaying:v}),c.a.createElement(h,{name:v.name,artist:"".concat(v.artist," ")})),c.a.createElement(l.a,{normal:!m},0!==r&&c.a.createElement(s.a,{button:!0,onClick:function(){d(null),o(0)}},"Volver a escoger"),m?0===r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"\xbfComo te quieres sentir ?"),c.a.createElement(g,{onClick:function(){return o(1)},state:1}),c.a.createElement(g,{onClick:function(){return o(3)},state:3}),c.a.createElement(g,{onClick:function(){return o(2)},state:2})):c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"\xbfComo te sientes ahora?"),c.a.createElement(g,{onClick:function(){return d(1)},state:1}),c.a.createElement(g,{onClick:function(){return d(2)},state:2}))),m&&0!==r&&c.a.createElement(a.Suspense,{fallback:c.a.createElement(c.a.Fragment,null)},c.a.createElement(x,{nowPlaying:v,state:r})))},A=Boolean("34.68.6.184"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(c.a.createElement(C,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");A?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):I(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):I(t,e)})}}()}],[[21,1,2]]]);
//# sourceMappingURL=main.426ac856.chunk.js.map